(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{767:function(e,t,s){"use strict";s.r(t);var r=s(70),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"first-request-handler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#first-request-handler"}},[e._v("#")]),e._v(" First Request Handler")]),e._v(" "),s("p",[e._v("Now that you know what Express is and you've installed it, let's create the server. You may remember from the "),s("strong",[e._v("Create Web Server")]),e._v(" lesson that to create a server, we need to import the built-in '"),s("strong",[e._v("http")]),e._v("' module.")]),e._v(" "),s("p",[e._v("Let's do that inside the server.js file:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// server.js\nconst http = require('http');\nconst port = process.env.PORT || 3000;\nconst server = http.createServer();\nserver.listen(port); \n")])])]),s("blockquote",[s("p",[e._v("!During this series, the first commented line of each code snippet is specifying which file we are working with.")])]),e._v(" "),s("p",[e._v("Notice that we have used the "),s("strong",[e._v("environment variable")]),e._v(" PORT ("),s("strong",[e._v("process.env.PORT")]),e._v(") in the variable port. This means that Node will check for a variable 'PORT' in its environment variables ("),s("strong",[e._v("process.env")]),e._v(") and if ( || ) nothing is found, then it will automatically use the port 3000.")]),e._v(" "),s("p",[e._v("Now we have a simple server which will handle the main part of our API service. We are going to write our first request handler using Express, which will return the same thing for any type of request.\nModify the app.js file, import the express module:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// app.js\nconst express = require('express');\nconst app = express();\n")])])]),s("p",[e._v("Now let's write the request handler itself:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// app.js\napp.use((req, res, next) => {\n  res.status(200).json({\n    message: 'Hello World!'\n  });\n});\n")])])]),s("p",[e._v("The "),s("strong",[e._v("use()")]),e._v(" method above is set up as middleware, and the incoming request goes through it. Now we are setting up a handler where it takes the arguments "),s("strong",[e._v("req")]),e._v(" (request), "),s("strong",[e._v("res")]),e._v(" (response), and "),s("strong",[e._v("next")]),e._v(" (function) where the "),s("strong",[e._v("next")]),e._v(" passes the request to the next middleware if one is available.\nSo, in the response, we are setting a status of 200 (Ok) to respond and pass the message as a JSON object.")]),e._v(" "),s("p",[e._v("There's one thing left to do: export the app object to be able to attach it to the server.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// app.js\n...\n module.exports = app;\n")])])]),s("p",[e._v("Now let's go back to the server.js file and add the following:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// server.js\nconst http = require('http');\nconst app = require('./app');\nconst port = process.env.PORT || 3000;\nconst server = http.createServer(app);\nserver.listen(port);\n")])])]),s("p",[e._v("The setup above will allow us to send a request to the server and get a response of status Ok and the specified message.")]),e._v(" "),s("p",[e._v("To run the server, you need the following command:\n"),s("code",[e._v("$ node server.js")]),e._v("\nIt will start the server on your localhost on the port "),s("strong",[e._v("3000")]),e._v(" if there is no "),s("strong",[e._v(".env")]),e._v(" set.")]),e._v(" "),s("blockquote",[s("p",[e._v("!In the next lesson, you will learn how to send a request and get a response from the server.")])])])}),[],!1,null,null,null);t.default=a.exports}}]);