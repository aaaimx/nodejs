(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{800:function(e,s,a){"use strict";a.r(s);var t=a(70),o=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"mongodb-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-model"}},[e._v("#")]),e._v(" MongoDB Model")]),e._v(" "),a("p",[e._v("Toda la configuración está hecha. Tenemos un MongoDB en funcionamiento y Mongoose está conectado a nuestra base de datos. ¡Ahora tenemos que volver a nuestro proyecto y comenzar a escribir JavaScript nuevamente!")]),e._v(" "),a("p",[e._v("Para poder almacenar datos en nuestra base de datos, necesitamos modelos Mongoose. Debe definir cómo va a almacenar objetos en la base de datos, luego crear un modelo (Objeto JavaScript) basado en eso. Este modelo tendrá algunas funciones que lo ayudarán a agregar, actualizar, eliminar, fusionar, buscar, ordenar y realizar muchas más operaciones en ese conjunto de datos.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Puedes leer más sobre los modelos en el oficial "),a("a",{attrs:{href:"https://docs.mongodb.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("MongoDB"),a("OutboundLink")],1),e._v(" y "),a("a",{attrs:{href:"http://mongoosejs.com/docs/guide.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mongoose"),a("OutboundLink")],1),e._v(" documentación.")])]),e._v(" "),a("p",[e._v("Ahora, recordemos nuestra estructura de proyecto desde "),a("a",{attrs:{href:""}},[e._v("aquí")]),e._v('. Necesitamos agregar el directorio "modelos" en nuestro proyecto para que se vea así:')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(".\n├── api\n│      ├── models\n│      │      ├── code.js\n│      │      └── user.js\n│      └── routes\n│               ├── codes.js\n│               └── users.js\n├── app.js\n├── package.json\n└── server.js\n3 directories, 7 files\n")])])]),a("p",[e._v("Un modelo es solo un objeto JavaScript que se construye sobre Mongoose. Comencemos con el archivo user.js. En primer lugar, debe requerir la mangosta. A continuación necesitamos el esquema:")]),e._v(" "),a("div",{staticClass:"language-JS extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// models/user.js")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" mongoose "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'mongoose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" userSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("p",[e._v("Acabamos de pasar un objeto JavaScript al esquema del método, donde deberíamos definir cómo se ve nuestro modelo.\nAgreguemos ID, correo electrónico, nombre, edad y país:")]),e._v(" "),a("div",{staticClass:"language-JS extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// models/user.js")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" userSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  _id"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Types"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("ObjectId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  email"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  age"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  country"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" String\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("blockquote",[a("p",[e._v("Es una convención usar _id. Además, el mongoose.Schema.Types.ObjectId genera ID únicos aleatorios para cada documento.")])]),e._v(" "),a("p",[e._v("Ahora que tenemos el esquema, necesitamos crear un modelo y exportarlo para poder usarlo en otros módulos.")]),e._v(" "),a("p",[e._v("La función modelo toma dos argumentos: primero, el nombre que vamos a usar internamente, y segundo, el esquema que creamos:")]),e._v(" "),a("div",{staticClass:"language-JS extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// models/user.js")]),e._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'User'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" userSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("INFO")]),e._v(" "),a("p",[e._v("El esquema es como el diseño del objeto que queremos usar, en el que el modelo es el objeto mismo basado en ese esquema.")])])])}),[],!1,null,null,null);s.default=o.exports}}]);