(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{776:function(t,s,a){"use strict";a.r(s);var e=a(70),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"funciones-de-secuencia-de-escritura"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#funciones-de-secuencia-de-escritura"}},[t._v("#")]),t._v(" Funciones de secuencia de escritura")]),t._v(" "),a("p",[t._v("Aquí cubriremos las funciones comunes de las secuencias de escritura:")]),t._v(" "),a("p",[a("code",[t._v("writable.write(chunk[, encoding][, callback])")]),t._v(": Este método escribe los datos proporcionados en la secuenica y llama a la devolución de llamada cuando no hay más datos para transmitir. Si se produce un error, es posible que no llame a la devolución de llamada, por lo que es bueno escuchar el evento '"),a("strong",[t._v("error")]),t._v("'.")]),t._v(" "),a("p",[t._v("También tiene un valor de retorno, devuelve "),a("em",[t._v("verdadero")]),t._v(" cuando el búfer interno es inferior al límite (highWaterMark). Se recomienda manejar el caso falso con el evento '"),a("strong",[t._v("drain")]),t._v("'.")]),t._v(" "),a("p",[t._v("Este método se a visto en ejemplos anteriores, donde queríamos escribir datos en un archibo o enviarlos al cliente.")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("highWaterMark")]),t._v(": es el límite del búfer de flujo, que es "),a("strong",[t._v("16k")]),t._v(" por defecto. Puede acceder a su valor utilizando la propiedad '"),a("strong",[t._v("writableHighWaterMark")]),t._v("'.")])]),t._v(" "),a("p",[a("code",[t._v("writable.end([chunk][, encoding][, callback])")]),t._v(": Este método indica que no se escribirán más datos en 'wriable'. El fragmento opcional nos da la capacidad de escribir un último fragmento de datos antes de cerrar la secuencia. Si se proporciona la devolución de llamada, se escuchará en el evento '"),a("strong",[t._v("finish")]),t._v("'. Llamar al método "),a("code",[t._v("write()")]),t._v(" después del "),a("code",[t._v("final()")]),t._v(" generará un error.")]),t._v(" "),a("p",[t._v("Veamos un ejemplo simple:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWriteStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./myFile.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A simple text. '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Write complete!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'The end text.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'End complete!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("El resultado es un archivo llamado '"),a("strong",[t._v("myFile.txt")]),t._v('\' con el cuerpo: "Un texto simple. El texto final", y las salidas de devolución de llamada son: "¡Write complete! ¡End complete!".')]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("El parámetro de codificación opcional se usa cuando pasamos una cadena. Algunas de las opciones de codificación válidas son "),a("strong",[t._v("ascii")]),t._v(", "),a("strong",[t._v("utf8/utf-8")]),t._v(", "),a("strong",[t._v("base64")]),t._v(", "),a("strong",[t._v("binary")]),t._v(", "),a("strong",[t._v("hex")]),t._v(" y pocos más, "),a("a",{attrs:{href:"https://stackoverflow.com/questions/14551608/list-of-encodings-that-node-js-supports/14551669#14551669",target:"_blank",rel:"noopener noreferrer"}},[t._v("listado aquí"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);s.default=n.exports}}]);