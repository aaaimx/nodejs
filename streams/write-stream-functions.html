<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Funciones de secuencia de escritura | Node.js</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/nodejs/assets/css/0.styles.5ef21b33.css" as="style"><link rel="preload" href="/nodejs/assets/js/app.760405ab.js" as="script"><link rel="preload" href="/nodejs/assets/js/2.1eaf5745.js" as="script"><link rel="preload" href="/nodejs/assets/js/58.91f7c621.js" as="script"><link rel="prefetch" href="/nodejs/assets/js/10.e5e910dd.js"><link rel="prefetch" href="/nodejs/assets/js/11.9b9c7544.js"><link rel="prefetch" href="/nodejs/assets/js/12.d6261679.js"><link rel="prefetch" href="/nodejs/assets/js/13.c1d86efd.js"><link rel="prefetch" href="/nodejs/assets/js/14.5bf668fb.js"><link rel="prefetch" href="/nodejs/assets/js/15.4c639a09.js"><link rel="prefetch" href="/nodejs/assets/js/16.4f56e71a.js"><link rel="prefetch" href="/nodejs/assets/js/17.185a46a1.js"><link rel="prefetch" href="/nodejs/assets/js/18.53866c74.js"><link rel="prefetch" href="/nodejs/assets/js/19.d974decb.js"><link rel="prefetch" href="/nodejs/assets/js/20.7633ac3c.js"><link rel="prefetch" href="/nodejs/assets/js/21.00e006e9.js"><link rel="prefetch" href="/nodejs/assets/js/22.d6b100ea.js"><link rel="prefetch" href="/nodejs/assets/js/23.e859856e.js"><link rel="prefetch" href="/nodejs/assets/js/24.d16053fb.js"><link rel="prefetch" href="/nodejs/assets/js/25.46ddad2a.js"><link rel="prefetch" href="/nodejs/assets/js/26.b36c6060.js"><link rel="prefetch" href="/nodejs/assets/js/27.c5144792.js"><link rel="prefetch" href="/nodejs/assets/js/28.06d7e625.js"><link rel="prefetch" href="/nodejs/assets/js/29.42faafa5.js"><link rel="prefetch" href="/nodejs/assets/js/3.b6b6cec9.js"><link rel="prefetch" href="/nodejs/assets/js/30.9b17f888.js"><link rel="prefetch" href="/nodejs/assets/js/31.6dc9445d.js"><link rel="prefetch" href="/nodejs/assets/js/32.46ae5f09.js"><link rel="prefetch" href="/nodejs/assets/js/33.8b7c0dc7.js"><link rel="prefetch" href="/nodejs/assets/js/34.6e3a2e43.js"><link rel="prefetch" href="/nodejs/assets/js/35.f9cd085a.js"><link rel="prefetch" href="/nodejs/assets/js/36.78518b40.js"><link rel="prefetch" href="/nodejs/assets/js/37.26dcb6d9.js"><link rel="prefetch" href="/nodejs/assets/js/38.70ad5319.js"><link rel="prefetch" href="/nodejs/assets/js/39.40191cee.js"><link rel="prefetch" href="/nodejs/assets/js/4.c3e26607.js"><link rel="prefetch" href="/nodejs/assets/js/40.be1582bb.js"><link rel="prefetch" href="/nodejs/assets/js/41.35bf7980.js"><link rel="prefetch" href="/nodejs/assets/js/42.4f7e9f05.js"><link rel="prefetch" href="/nodejs/assets/js/43.0a8d443b.js"><link rel="prefetch" href="/nodejs/assets/js/44.8136517a.js"><link rel="prefetch" href="/nodejs/assets/js/45.98fd3832.js"><link rel="prefetch" href="/nodejs/assets/js/46.550bf620.js"><link rel="prefetch" href="/nodejs/assets/js/47.169ba400.js"><link rel="prefetch" href="/nodejs/assets/js/48.d7bbbae8.js"><link rel="prefetch" href="/nodejs/assets/js/49.3e23f8ca.js"><link rel="prefetch" href="/nodejs/assets/js/5.9b82a759.js"><link rel="prefetch" href="/nodejs/assets/js/50.e6df6ec2.js"><link rel="prefetch" href="/nodejs/assets/js/51.a220c753.js"><link rel="prefetch" href="/nodejs/assets/js/52.8f9d9781.js"><link rel="prefetch" href="/nodejs/assets/js/53.4c945f7f.js"><link rel="prefetch" href="/nodejs/assets/js/54.51e96ebc.js"><link rel="prefetch" href="/nodejs/assets/js/55.bede7f1e.js"><link rel="prefetch" href="/nodejs/assets/js/56.e19f6407.js"><link rel="prefetch" href="/nodejs/assets/js/57.b7b375b8.js"><link rel="prefetch" href="/nodejs/assets/js/6.8d56e307.js"><link rel="prefetch" href="/nodejs/assets/js/7.5f4e3148.js"><link rel="prefetch" href="/nodejs/assets/js/8.75b88a8a.js"><link rel="prefetch" href="/nodejs/assets/js/9.5bc03069.js">
    <link rel="stylesheet" href="/nodejs/assets/css/0.styles.5ef21b33.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/nodejs/" class="router-link-active home-link"><img src="https://pablomagaz.com/content/images/2020/01/NodeJs.png" alt="Node.js" class="logo"> <span class="site-name">Node.js</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/nodejs/intro/">
          Intro
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/nodejs/core/">
          Core
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item ant-menu-item-selected"><a href="/nodejs/streams/" class="router-link-active">
          Streams
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/nodejs/rest/">
          REST
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/nodejs/middlewares/">
          Middlewares
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/nodejs/db/">
          Base de datos
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/nodejs/glossary/">
          Glosario
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/rnovec" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Streams</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nodejs/streams/" aria-current="page" title="Streams" class="sidebar-link">Streams</a></li><li><a href="/nodejs/streams/write-and-read-streams.html" title="Secuencia de escritura y lectura" class="sidebar-link">Secuencia de escritura y lectura</a></li><li><a href="/nodejs/streams/write-stream-events.html" title="Eventos de secuencia de escritura" class="sidebar-link">Eventos de secuencia de escritura</a></li><li><a href="/nodejs/streams/write-stream-functions.html" aria-current="page" title="Funciones de secuencia de escritura" class="active sidebar-link">Funciones de secuencia de escritura</a></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="funciones-de-secuencia-de-escritura"><a href="#funciones-de-secuencia-de-escritura" class="header-anchor">#</a> Funciones de secuencia de escritura</h1> <p>Aquí cubriremos las funciones comunes de las secuencias de escritura:</p> <p><code>writable.write(chunk[, encoding][, callback])</code>: Este método escribe los datos proporcionados en la secuenica y llama a la devolución de llamada cuando no hay más datos para transmitir. Si se produce un error, es posible que no llame a la devolución de llamada, por lo que es bueno escuchar el evento '<strong>error</strong>'.</p> <p>También tiene un valor de retorno, devuelve <em>verdadero</em> cuando el búfer interno es inferior al límite (highWaterMark). Se recomienda manejar el caso falso con el evento '<strong>drain</strong>'.</p> <p>Este método se a visto en ejemplos anteriores, donde queríamos escribir datos en un archibo o enviarlos al cliente.</p> <ul><li><strong>highWaterMark</strong>: es el límite del búfer de flujo, que es <strong>16k</strong> por defecto. Puede acceder a su valor utilizando la propiedad '<strong>writableHighWaterMark</strong>'.</li></ul> <p><code>writable.end([chunk][, encoding][, callback])</code>: Este método indica que no se escribirán más datos en 'wriable'. El fragmento opcional nos da la capacidad de escribir un último fragmento de datos antes de cerrar la secuencia. Si se proporciona la devolución de llamada, se escuchará en el evento '<strong>finish</strong>'. Llamar al método <code>write()</code> después del <code>final()</code> generará un error.</p> <p>Veamos un ejemplo simple:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'./myFile.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

file<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'A simple text. '</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Write complete!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

file<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'The end text.'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'End complete!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El resultado es un archivo llamado '<strong>myFile.txt</strong>' con el cuerpo: &quot;Un texto simple. El texto final&quot;, y las salidas de devolución de llamada son: &quot;¡Write complete! ¡End complete!&quot;.</p> <hr> <p>El parámetro de codificación opcional se usa cuando pasamos una cadena. Algunas de las opciones de codificación válidas son <strong>ascii</strong>, <strong>utf8/utf-8</strong>, <strong>base64</strong>, <strong>binary</strong>, <strong>hex</strong> y pocos más, <a href="https://stackoverflow.com/questions/14551608/list-of-encodings-that-node-js-supports/14551669#14551669" target="_blank" rel="noopener noreferrer">listado aquí<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/nodejs/streams/write-stream-events.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        Eventos de secuencia de escritura
      </a></span> <!----></p></div> </main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/nodejs/assets/js/app.760405ab.js" defer></script><script src="/nodejs/assets/js/2.1eaf5745.js" defer></script><script src="/nodejs/assets/js/58.91f7c621.js" defer></script>
  </body>
</html>